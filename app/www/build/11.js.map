{"version":3,"sources":["../../src/pages/noticia-popover/noticia-popover.module.ts","../../src/pages/noticia-popover/noticia-popover.ts"],"names":[],"mappings":"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","file":"11.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { NoticiaPopoverPage } from './noticia-popover';\n\n@NgModule({\n  declarations: [\n    NoticiaPopoverPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(NoticiaPopoverPage),\n  ],\n})\nexport class NoticiaPopoverPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/noticia-popover/noticia-popover.module.ts","import { ToastController } from 'ionic-angular/components/toast/toast-controller';\nimport { AuthProvider } from './../../providers/auth/auth';\nimport { NoticeProvider } from './../../providers/notice/notice';\nimport { SocialSharing } from '@ionic-native/social-sharing';\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ViewController, AlertController } from 'ionic-angular';\nimport { LoadingController } from 'ionic-angular/components/loading/loading-controller';\n\n@IonicPage()\n@Component({\n  selector: 'page-noticia-popover',\n  templateUrl: 'noticia-popover.html',\n})\nexport class NoticiaPopoverPage {\n\n  // noticia\n  public notice;\n\n  constructor(public navCtrl: NavController,\n              public loadingCtrl: LoadingController,\n              public navParams: NavParams,\n              public socialSharing: SocialSharing,\n              public viewCtrl: ViewController,\n              public noticeProv: NoticeProvider,\n              public auth: AuthProvider,\n              public alertCtrl: AlertController,\n              public toastCtrl: ToastController) {\n\n    this.notice = this.navParams.get( 'notice' );\n  }\n\n  /**\n   * Compartilha a noticia nas redes sociais\n   * \n   * @param url \n   */\n  shareNotice() {\n    const link = ( this.notice.link ) ? this.notice.link : this.notice.notice_link;\n    this.socialSharing.share( link )\n    .then( () => this.viewCtrl.dismiss() );\n  }\n\n  /**\n   * Chama as funções relativas ao ler depois\n   * @param status \n   */\n  toggleSaveForLater( status ) {\n    if( status == 'T' ) {\n      this.unsaveForLater();\n    } else {\n      this.saveForLater();\n    }\n  }\n\n  /**\n   * Salva noticia para ler mais tarde\n   */\n  saveForLater() {\n\n    // Verifica se o usuario esta logado\n    if( !this.auth.user() ) {\n      this.navCtrl.push( \"LoginPage\" );\n      return;\n    }\n\n    // Mostra o loading\n    const loading = this.loadingCtrl.create( { content: 'Salvando notícia...' });\n    loading.present();\n\n    // Tenta salvar a noticia\n    this.noticeProv.saveForLater( this.notice.id )\n    .then( success => {\n      this.notice.save_for_later = 'T';\n    })\n    .catch( err => console.log( err ) )\n    .then( () => {\n      this.viewCtrl.dismiss();\n      loading.dismiss();\n    });\n  }\n\n  /**\n   * Tira a noticia do ler depois\n   */\n  unsaveForLater() {\n\n    // Mostra o loading\n    const loading = this.loadingCtrl.create( { content: 'Removendo notícia...' } );\n    loading.present();\n\n    this.noticeProv.unsaveForLater( this.notice.id )\n    .then( success => {\n      this.notice.save_for_later = 'F';\n    })\n    .catch( err => console.log( err ) )\n    .then( () => {\n      this.viewCtrl.dismiss();      \n      loading.dismiss(); \n    });\n  }\n\n  /**\n   * Denuncia a noticia\n   */\n  report() {\n    \n    // Verifica se o user esta logado\n    if( !this.auth.user() ) {\n      this.navCtrl.push( 'LoginPage' );\n    } else this.alertConfirm();\n  }\n\n  /**\n   * Mostra alerta de confirmação de report\n   * \n   */\n  alertConfirm() {\n    let alert = this.alertCtrl.create({\n      title: 'Denunciar',\n      message: 'Deseja realmente denunciar essa noticia?',\n      buttons: [{\n        text: 'Sim',\n        handler: () => {\n          this.reportConfirmed();\n        }\n      },{\n        text: 'Não',\n        role: 'cancel',\n        handler: () => {\n          this.viewCtrl.dismiss();\n        }\n      }]\n    });\n    alert.present();\n  }\n\n  /**\n   * Mostra o toast\n   * \n   */\n  presentToast( msg ) {\n    let toast = this.toastCtrl.create({\n      message: msg,\n      duration: 3000,\n      position: 'bottom'\n    });\n    toast.present();\n  }\n\n  /**\n   * Faz o report\n   * \n   */\n  reportConfirmed() {\n\n    // Mostra o loading\n    const loading = this.loadingCtrl.create( { content: 'Denunciando notícia...' } );\n    loading.present();\n\n    // Salva o report\n    this.noticeProv.report( this.notice.id )\n    .then( success => { \n        this.notice.reported = true;\n        this.presentToast( 'Denunciado' );\n    })\n    .catch( err => {\n      console.log(err);\n      this.presentToast( 'Erro ao tentar denunciar' );\n    } )\n    .then( () => {\n      this.viewCtrl.dismiss();\n      loading.dismiss();\n    });\n  }\n}\n\n// End of file\n\n\n// WEBPACK FOOTER //\n// ./src/pages/noticia-popover/noticia-popover.ts"],"sourceRoot":""}