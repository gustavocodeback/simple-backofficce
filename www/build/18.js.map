{"version":3,"sources":["../../src/pages/cadastro/cadastro.module.ts","../../src/pages/cadastro/cadastro.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACN;AAU1C;IAAA;IAAiC,CAAC;IAArB,kBAAkB;QAR9B,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,+DAAY;aACb;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,+DAAY,CAAC;aACvC;SACF,CAAC;OACW,kBAAkB,CAAG;IAAD,yBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACZ4B;AACY;AAE7B;AACkC;AAO5E;IAWE,sBAAmB,OAAsB,EACtB,SAAoB,EACpB,WAA8B,EAC9B,IAAkB;QAHlB,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACpB,gBAAW,GAAX,WAAW,CAAmB;QAC9B,SAAI,GAAJ,IAAI,CAAc;QANrC,6BAA6B;QACtB,SAAI,GAAG,EAAE,CAAC;QAOf,kCAAkC;QAClC,IAAI,CAAC,QAAQ,EAAE,CAAC;IAClB,CAAC;IAED;;;;OAIG;IACI,+BAAQ,GAAf;QAEE,kCAAkC;QAClC,IAAM,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAE,EAAE,CAAE,CAAC;QAC9C,OAAO,CAAC,OAAO,EAAE,CAAC;QAElB,8BAA8B;QAC9B,IAAI,CAAC,QAAQ,GAAG,IAAI,sFAAgB,EAAE,CAAC;QAEvC,8BAA8B;QAC9B,IAAM,KAAK,GAAG;YACV,IAAI,EAAO,UAAU;YACrB,KAAK,EAAM,sBAAsB;YACjC,QAAQ,EAAG,sDAAsD;YACjE,OAAO,EAAI,uDAAuD;SACnE,CAAC;QAEJ,oBAAoB;QACpB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAE,KAAK,CAAE,CAAC;QAEpD,iBAAiB;QACjB,OAAO,CAAC,OAAO,EAAE,CAAC;IACpB,CAAC;IAED;;;;OAIG;IACU,6BAAM,GAAnB;;;;;gBAGQ,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAE,EAAE,CAAE,CAAC;gBAC9C,OAAO,CAAC,OAAO,EAAE,CAAC;gBAGZ,KAAK,GAAG,IAAI,CAAC,KAAK,CAAE,IAAI,CAAC,SAAS,CAAE,IAAI,CAAC,YAAY,CAAC,KAAK,CAAE,CAAE,CAAC;gBAEtE,4BAA4B;gBAC5B,IAAI,CAAC,IAAI,CAAC,MAAM,CAAE,KAAK,CAAE;qBACxB,IAAI,CAAE,cAAI;oBAET,KAAI,CAAC,IAAI,CAAC,KAAK,CAAE,KAAK,CAAE;yBACvB,IAAI,CAAE,cAAO,CAAC,CAAC;yBACf,KAAK,CAAE,cAAO,CAAC,CAAC;yBAChB,IAAI,CAAE;wBAEL,oCAAoC;wBACpC,KAAI,CAAC,OAAO,CAAC,IAAI,CAAE,UAAU,CAAE,CAAC;oBAClC,CAAC,CAAC,CAAC;gBACL,CAAC,CAAC;qBACD,KAAK,CAAE,aAAG;oBAET,gBAAgB;oBAChB,KAAI,CAAC,IAAI,GAAG,GAAG,CAAC;gBAClB,CAAC,CAAC;qBACD,IAAI,CAAE,cAAM,cAAO,CAAC,OAAO,EAAE,EAAjB,CAAiB,CAAE,CAAC;;;;KAClC;IAED;;;;OAIG;IACI,2BAAI,GAAX;QACE,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;IACrB,CAAC;IA3FU,YAAY;QAJxB,wEAAS,CAAC;YACT,QAAQ,EAAE,eAAe;WACG;SAC7B,CAAC;6EAYyC;YACX,wEAAS;YACP,4EAAiB;YACxB,SAAY;OAd1B,YAAY,CA6FxB;IAAD,CAAC;AAAA;SA7FY,YAAY,e","file":"18.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { CadastroPage } from './cadastro';\n\n@NgModule({\n  declarations: [\n    CadastroPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(CadastroPage),\n  ],\n})\nexport class CadastroPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cadastro/cadastro.module.ts","import { AuthProvider } from './../../providers/auth/auth';\nimport { ValidateProvider } from './../../providers/validate/validate';\nimport { FormGroup } from '@angular/forms';\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, LoadingController } from 'ionic-angular';\n\n@IonicPage()\n@Component({\n  selector: 'page-cadastro',\n  templateUrl: 'cadastro.html',\n})\nexport class CadastroPage {\n\n  // Formulario de cadastro\n  public registerForm: FormGroup;\n\n  // Validador do formulario\n  public validate: ValidateProvider;\n\n  // Inicia a variavel de erros\n  public erro = '';\n\n  constructor(public navCtrl: NavController, \n              public navParams: NavParams,\n              public loadingCtrl: LoadingController,\n              public auth: AuthProvider) {\n\n    // Inicia o formulario de cadastro\n    this.initForm();\n  }\n\n  /**\n   * initForm\n   * \n   * Inicializa o formulario de cadastro\n   */\n  public initForm() {\n\n    // Cria o loading e mostra na tela\n    const loading = this.loadingCtrl.create( {} );\n    loading.present();\n\n    // Instancia um novo validador\n    this.validate = new ValidateProvider();\n\n    // Seta as regras de validação\n    const rules = {\n        name     : 'required',\n        email    : 'required|valid_email',\n        password : 'required|maxLength[18]|minLength[6]|matches[confirm]',\n        confirm  : 'required|maxLength[18]|minLength[6]|matches[password]'\n      };\n\n    // Seta o formulario\n    this.registerForm = this.validate.set_form( rules );\n\n    // Tira o loading\n    loading.dismiss();\n  }\n\n  /**\n   * cadastrar\n   * \n   * Faz o cadastro do usuario\n   */\n  public async signup() {\n\n    // Cria o loading\n    const loading = this.loadingCtrl.create( {} );\n    loading.present();\n\n    // Pega os dados do formulario\n    const dados = JSON.parse( JSON.stringify( this.registerForm.value ) );\n\n    // Tenta cadastrar o usuario\n    this.auth.signup( dados )\n    .then( user => {\n\n      this.auth.login( dados )\n      .then( () => {})     \n      .catch( () => {})     \n      .then( () => {\n        \n        // Redireciona para a pagina de feed\n        this.navCtrl.push( 'FeedPage' );\n      });     \n    })\n    .catch( err => {\n\n      // Seta os erros\n      this.erro = err;\n    })\n    .then( () => loading.dismiss() );\n  }\n\n  /**\n   * back\n   * \n   * volta para a pagina anterior\n   */\n  public back() {\n    this.navCtrl.pop();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cadastro/cadastro.ts"],"sourceRoot":""}